!function(){"use strict";function e(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"_"+e()}String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.replaceAll=function(e,t){var n=new RegExp(e,"g");return this.replace(n,t)},angular.module("piemix.modules",["ngSanitize","ui.bootstrap"]).directive("pieMix",["$parse",function(t){return{restrict:"AEC",scope:{slices:"=",config:"=",callbackOnClick:"&"},templateUrl:"template/piemix/template.html",controller:["$scope","$timeout","$element","$attrs","$parse",function(t,n,r,a,i){var o=this;o._generateCoordinates=function(e,t,n){var r=e+"deg_"+t+"_rad"+n.toString();if("undefined"!=typeof o.coordinates[r]&&null!=o.coordinates[r])return o.coordinates[r];var a=0,i=0,c=Math.abs(t*Math.sin(.0174533*e)),d=Math.abs(t*Math.cos(.0174533*e));return e>=0&&90>=e?(a=n.x+c,i=n.y-d):e>=90&&180>=e?(a=n.x+c,i=n.y+d):e>=180&&270>=e?(a=n.x-c,i=n.y+d):(a=n.x-c,i=n.y-d),o.coordinates[r]={x:Math.ceil(a),y:Math.ceil(i)},o.coordinates[r]},o._generatePies=function(t,n,r){var a=_.reduce(t,function(e,t){return e+t.value},0),i=0;_.each(t,function(t,c){for(var d=0,u=o.baseRadius,l=o.baseRadius;n-1>d;)l*=o.radiusIncrementFactor,u+=l,d+=1;var s=360;"undefined"!=typeof r&&null!=r&&"undefined"!=typeof r.deg&&null!=r.deg&&(s=r.deg);var g=Math.ceil(t.value/a*s),f=i+g,x=i+g+("undefined"!=typeof t.degStart&&null!=t.degStart&&t.degStart!={}?t.degStart:0),y=i+(x-i)/2,p=o._generateCoordinates(i,u,o.centerXY),h=o._generateCoordinates(y,u,o.centerXY),m=o._generateCoordinates(x,u,o.centerXY),v=0;g>180&&(v=1),t._uid=e(),t.rad=u,t.deg=g,t.degStart=f-g,t.effectiveDeg=x,t.midDeg=y,t.degEnd=f,t.startXY=p,t.midXY=h,t.endXY=m,t.pathCoeff=v,t.activecolor=t.color,t.priority=n;var C="M"+t.startXY.x+" "+t.startXY.y+" A "+t.rad+" "+t.rad+", 0, "+t.pathCoeff+", 1, "+t.endXY.x+" "+t.endXY.y+" L "+o.centerXY.x+" "+o.centerXY.y+" Z";t.d=C;var S=_.clone(t);delete S.child,o.generatedPies.push(S),"undefined"!=typeof t.child&&t.child!={}&&t.child.length>0&&o._generatePies(t.child,n+1,t),i=f})},o._calDeepLength=function(e){var t=0;return e.length>0&&(t+=1),_.each(e,function(e){"undefined"!=typeof e.child&&e.child!={}&&e.child.length>0&&(t+=o._calDeepLength(e.child))}),t},o._calMaxRadius=function(e){for(var t=o._calDeepLength(e),n=o.baseRadius,r=0;t-1>r;)n+=o.baseRadius*o.radiusIncrementFactor,r+=1;return n},o.getContainerWidth=function(){return"undefined"!=typeof r&&null!=r?r.width():2*o._maxRad},o.getContainerHeight=function(){return"undefined"!=typeof r&&null!=r?r.height():2*o._maxRad},o._getCenterXY=function(e,t){o._maxRad=o._calMaxRadius(e);var n=o.getContainerWidth()/2;return t="undefined"!==t&&t!={}&&null!=t?t:0,{x:n,y:o._maxRad+2*t}},o._calcQuadrants=function(){var e={},t=o.getContainerWidth(),n=(o.getContainerHeight(),o.centerXY),r=o.gapToLabel,a=o._maxRad;return t-30>=a+r?(e.NE={x:n.x+a+r,y:10},e.NW={x:n.x-a-r,y:10},e.SE={x:n.x+a+r,y:n.y},e.SW={x:n.x-a-r,y:n.y},e):void 0},o._getQuadrantKey=function(e){var t="";return e>=0&&90>=e?t="NE":e>90&&180>=e?t="SE":e>180&&270>=e?t="SW":e>270&&360>=e&&(t="NW"),t},o._drawHelpBoxes=function(){var e={NE:0,SE:0,NW:0,SW:0},t=50,n=_.sortBy(angular.copy(o.generatedPies),function(e){return-e.priority}),r=o._calcQuadrants();_.each(n,function(n){e.id=n.id;var a=o._getQuadrantKey(n.midDeg),i=_.clone(r[a]);if(i.y=i.y+e[a],"NE"==a||"SE"==a){var c={x:i.x,y:i.y},d={x:i.x+100,y:i.y},u=n.midXY;n._ptr=u.x+","+u.y+" "+c.x+","+c.y+" "+d.x+","+d.y,n.colorBox={x:c.x,y:c.y+8},n.textBox={x:c.x+24,y:c.y+20},n.incr=e[a]}else if("NW"==a||"SW"==a){var c={x:i.x,y:i.y},d={x:i.x-100,y:i.y},u=n.midXY;n._ptr=d.x+","+d.y+" "+c.x+","+c.y+" "+u.x+","+u.y,n.colorBox={x:c.x-100,y:c.y+8},n.textBox={x:c.x-100+24,y:c.y+20},n.incr=e[a]}e[a]=e[a]+t;var l=_.find(o.generatedPies,function(e){return 0==e._uid.localeCompare(n._uid)});"undefined"!=typeof l&&null!=l&&l!={}&&(l.colorBox=n.colorBox,l.textBox=n.textBox,l.ptr=n._ptr,l.fillOpacity=1)})},o._startGenerating=function(e){o.generatedPies=[],o.centerXY=o._getCenterXY(e,5),o.svgWidth=o.getContainerWidth(),o.svgHeight=2*o._maxRad+100,o._generatePies(e,1,null),n(o._drawHelpBoxes,500)},o._init=function(e){this.baseRadius=angular.copy(o.config.baseRadius)||100,this.radiusIncrementFactor=angular.copy(o.config.radiusIncrementFactor)||.66,this.gapToLabel=angular.copy(o.config.gapToLabel)||60,o.coordinates={},o.generatedPies=[],o.centerXY={},o._maxRad={},o._startGenerating(e)},o.pieSliceClicked=function(e){o.callbackOnClick({data:e})}}],controllerAs:"piemixctrl",bindToController:!0,replace:!0,link:function(e,n,r,a){var i=[];angular.forEach(["slices","config"],function(n){if(r[n]){t(r[n]);i.push(e.$parent.$watch(angular.bind(a,function(){return this[n]}),function(e){a._init(angular.copy(a.slices))},!0))}})}}}])}();
!function(){"use strict";var t={pieMixMasterTmpl:'        <div class="pie-mix-holder" ng-style="{\'height\': piemixctrl.svgHolderHeight + \'px\'}">            <svg height="{{piemixctrl.svgHeight}}" width="{{piemixctrl.svgWidth}}" version="1.1" xmlns="http://www.w3.org/2000/svg">                <path tabindex="0" ng-attr-fill="{{path.activecolor}}" ng-attr-d="{{path.d}}" ng-attr-priority="{{path.priority}}" style="fill: {{path.activecolor}}" ng-repeat="path in piemixctrl.generatedPies  | orderBy:\'priority\':\'false\'" ng-click="piemixctrl.pieSliceClicked(path.id)" ng-mouseenter="path.activecolor = \'#000\'" ng-mouseleave="path.activecolor = path.color"/>                <rect ng-attr-x="{{path.colorBox.x}}" ng-attr-y="{{path.colorBox.y}}" width="15" height="15" style="fill-opacity:0;" ng-click="piemixctrl.pieSliceClicked(path.id)" ng-style="{\'fill\': path.activecolor, \'fill-opacity\': path.fillOpacity}" ng-repeat="path in piemixctrl.generatedPies  | orderBy:\'priority\':\'false\'" ng-mouseenter="path.activecolor = \'#000\'" ng-mouseleave="path.activecolor = path.color"/>                <text ng-attr-x="{{path.textBox.x}}" ng-attr-y="{{path.textBox.y}}" ng-repeat="path in piemixctrl.generatedPies  | orderBy:\'priority\':\'false\'">{{path.title}}</text>                <polyline ng-attr-points="{{path.ptr}}" fill="none" stroke="#000" ng-attr-stroke-width="{{path.activecolor != \'#000\' ? 1 : 2}}" ng-attr-stroke-opacity="{{path.activecolor != \'#000\' ? 0.50 : 1}}" stroke-linecap="round" stroke-dasharray="1, 5" ng-repeat="path in piemixctrl.generatedPies  | orderBy:\'priority\':\'false\'"/>            </svg>        </div>    '};angular.module("piemix.modules").run(["$templateCache",function(e){e.put("template/piemix/template.html",t.pieMixMasterTmpl)}])}();
angular.module("richcc.bootstrap.datepicker",["ui.bootstrap","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("richccDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4,light:!1,yearMapHeat:!1,preventModeToggle:!1,preventCalNav:!1,hideCalNav:!1,showMarkerForMoreEvents:!0,showDataLabel:!1,defaultDataLabel:"00:00",monthPopUpTmpl:"template/richcc/richccMonthPopup.html",dayPopUpTmpl:"template/richcc/richccDayPopup.html"}).controller("RichccDatepickerController",["$scope","$attrs","$parse","$interpolate","$locale","$log","dateFilter","richccDatepickerConfig","$datepickerSuppressError","uibDateParser",function(e,t,a,n,i,r,o,s,c,l){var p=this,u={$setViewValue:angular.noop},h={},d=[];this.modes=["day","month","year"],t.datepickerOptions?angular.forEach(["light","yearMapHeat","preventModeToggle","preventCalNav","hideCalNav","showMarkerForMoreEvents","showDataLabel","defaultDataLabel","monthPopUpTmpl","dayPopUpTmpl","customClass","customIconClass","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","initDate","maxDate","maxMode","minDate","minMode","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"],function(t){switch(t){case"light":case"yearMapHeat":case"preventModeToggle":case"preventCalNav":case"hideCalNav":case"showMarkerForMoreEvents":case"showDataLabel":case"defaultDataLabel":case"monthPopUpTmpl":case"dayPopUpTmpl":p[t]=e[t]=angular.isDefined(e.datepickerOptions[t])?e.datepickerOptions[t]:s[t],e.datepickerOptions[t]&&e.$watch(function(){return e.datepickerOptions[t]},function(a){p[t]=e[t]=angular.isDefined(a)?a:datepickerOptions[t],p.refreshView()});break;case"customIconClass":case"customClass":p[t]=e[t]=e.datepickerOptions[t]||angular.noop;break;case"datepickerMode":p[t]=e[t]=angular.isDefined(e.datepickerOptions.datepickerMode)?e.datepickerOptions.datepickerMode:s.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":p[t]=angular.isDefined(e.datepickerOptions[t])?n(e.datepickerOptions[t])(e.$parent):s[t];break;case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":p[t]=angular.isDefined(e.datepickerOptions[t])?e.datepickerOptions[t]:s[t];break;case"startingDay":angular.isDefined(e.datepickerOptions.startingDay)?p.startingDay=e.datepickerOptions.startingDay:angular.isNumber(s.startingDay)?p.startingDay=s.startingDay:p.startingDay=(i.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":e.datepickerOptions[t]?e.$watch(function(){return e.datepickerOptions[t]},function(e){e?angular.isDate(e)?p[t]=l.fromTimezone(new Date(e),h.timezone):p[t]=new Date(o(e,"medium")):p[t]=null,p.refreshView()}):p[t]=s[t]?l.fromTimezone(new Date(s[t]),h.timezone):null;break;case"maxMode":case"minMode":e.datepickerOptions[t]?e.$watch(function(){return e.datepickerOptions[t]},function(a){p[t]=e[t]=angular.isDefined(a)?a:datepickerOptions[t],("minMode"===t&&p.modes.indexOf(e.datepickerMode)<p.modes.indexOf(p[t])||"maxMode"===t&&p.modes.indexOf(e.datepickerMode)>p.modes.indexOf(p[t]))&&(e.datepickerMode=p[t])}):p[t]=e[t]=s[t]||null;break;case"initDate":e.datepickerOptions.initDate?(this.activeDate=l.fromTimezone(e.datepickerOptions.initDate,h.timezone)||new Date,e.$watch(function(){return e.datepickerOptions.initDate},function(e){e&&(u.$isEmpty(u.$modelValue)||u.$invalid)&&(p.activeDate=l.fromTimezone(e,h.timezone),p.refreshView())})):this.activeDate=new Date}}):(angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle"],function(a){p[a]=angular.isDefined(t[a])?n(t[a])(e.$parent):s[a]}),angular.forEach(["showWeeks","yearRows","yearColumns","shortcutPropagation"],function(a){p[a]=angular.isDefined(t[a])?e.$parent.$eval(t[a]):s[a]}),angular.isDefined(t.startingDay)?p.startingDay=e.$parent.$eval(t.startingDay):angular.isNumber(s.startingDay)?p.startingDay=s.startingDay:p.startingDay=(i.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7,angular.forEach(["minDate","maxDate"],function(a){t[a]?d.push(e.$parent.$watch(t[a],function(e){e?angular.isDate(e)?p[a]=l.fromTimezone(new Date(e),h.timezone):p[a]=new Date(o(e,"medium")):p[a]=null,p.refreshView()})):p[a]=s[a]?l.fromTimezone(new Date(s[a]),h.timezone):null}),angular.forEach(["minMode","maxMode"],function(a){t[a]?d.push(e.$parent.$watch(t[a],function(n){p[a]=e[a]=angular.isDefined(n)?n:t[a],("minMode"===a&&p.modes.indexOf(e.datepickerMode)<p.modes.indexOf(p[a])||"maxMode"===a&&p.modes.indexOf(e.datepickerMode)>p.modes.indexOf(p[a]))&&(e.datepickerMode=p[a])})):p[a]=e[a]=s[a]||null}),t.light&&d.push(e.$parent.$watch(t.light,function(a){p.light=e.light=angular.isDefined(a)?a:t.light,p.refreshView()})),t.yearMapHeat&&d.push(e.$parent.$watch(t.yearMapHeat,function(a){p.yearMapHeat=e.yearMapHeat=angular.isDefined(a)?a:t.yearMapHeat,p.refreshView()})),t.preventCalNav&&d.push(e.$parent.$watch(t.preventCalNav,function(a){p.preventCalNav=e.preventCalNav=angular.isDefined(a)?a:t.preventCalNav,p.refreshView()})),t.preventModeToggle&&d.push(e.$parent.$watch(t.preventModeToggle,function(a){p.preventModeToggle=e.preventModeToggle=angular.isDefined(a)?a:t.preventModeToggle,p.refreshView()})),angular.isDefined(t.initDate)?(this.activeDate=l.fromTimezone(e.$parent.$eval(t.initDate),h.timezone)||new Date,d.push(e.$parent.$watch(t.initDate,function(e){e&&(u.$isEmpty(u.$modelValue)||u.$invalid)&&(p.activeDate=l.fromTimezone(e,h.timezone),p.refreshView())}))):this.activeDate=new Date),t.events&&d.push(e.$parent.$watch(t.events,function(a){p._events=e.events=angular.isDefined(a)?a:t.events,e.monthViewData={},e.monthWiseEventDetails={},e.monthWiseEventMarkers={},p.refreshView()})),t.dayLabels&&d.push(e.$parent.$watch(t.dayLabels,function(a){p._dayLabels=e.dayLabels=angular.isDefined(a)?a:t.dayLabels,p.refreshView()})),t.eventPopupHide&&d.push(e.$parent.$watch(t.eventPopupHide,function(a){p.eventPopupHide=e.eventPopupHide=angular.isDefined(a)?a:t.eventPopupHide,p.refreshView()})),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),e.disabled=angular.isDefined(t.disabled)||!1,angular.isDefined(t.ngDisabled)&&d.push(e.$parent.$watch(t.ngDisabled,function(t){e.disabled=t,p.refreshView()})),e.isActive=function(t){return 0===p.compare(t.date,p.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){u=e,h=e.$options||s.ngModelOptions,u.$modelValue&&(this.activeDate=u.$modelValue),u.$render=function(){p.render()}},this.render=function(){if(u.$viewValue){var e=new Date(u.$viewValue),t=!isNaN(e);t?this.activeDate=l.fromTimezone(e,h.timezone):c||r.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){e.selectedDt=null,this._refreshView(),e.activeDt&&(e.activeDateId=e.activeDt.uid);var t=u.$viewValue?new Date(u.$viewValue):null;t=l.fromTimezone(t,h.timezone),u.$setValidity("dateDisabled",!t||this.element&&!this.isDisabled(t))}},this.createDateObject=function(t,a){var n=u.$viewValue?new Date(u.$viewValue):null;n=l.fromTimezone(n,h.timezone);var i={date:t,label:o(t,a.replace(/d!/,"dd")).replace(/M!/,"MM"),selected:n&&0===this.compare(t,n),disabled:this.isDisabled(t),current:0===this.compare(t,new Date),customClass:this.customClass(t)||null,customIconClass:this.customIconClass(t)||null};return n&&0===this.compare(t,n)&&(e.selectedDt=i),p.activeDate&&0===this.compare(i.date,p.activeDate)&&(e.activeDt=i),i},this.isDisabled=function(a){return e.disabled||this.minDate&&this.compare(a,this.minDate)<0||this.maxDate&&this.compare(a,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:a,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.customIconClass=function(t){return e.customIconClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var a=[];e.length>0;)a.push(e.splice(0,t));return a},e.select=function(t){if(e.datepickerMode===p.minMode){var a=u.$viewValue?l.fromTimezone(new Date(u.$viewValue),h.timezone):new Date(0,0,0,0,0,0,0);a.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),a=l.toTimezone(a,h.timezone),u.$setViewValue(a),u.$render()}else p.activeDate=t,e.datepickerMode=p.modes[p.modes.indexOf(e.datepickerMode)-1]},e.move=function(t){var a=p.activeDate.getFullYear()+t*(p.step.years||0),n=p.activeDate.getMonth()+t*(p.step.months||0);p.activeDate.setFullYear(a,n,1),p.refreshView();var i={datepickerMode:e.datepickerMode,activeDate:p.activeDate};"function"==typeof e.datepickerOptions.moveModeCallback&&e.datepickerOptions.moveModeCallback(i)},e.toggleMode=function(t){var a={datepickerMode:e.datepickerMode,activeDate:p.activeDate};"function"==typeof e.datepickerOptions.toggleModeCallBack&&e.datepickerOptions.toggleModeCallBack(a),this.light||this.preventModeToggle||(t=t||1,e.datepickerMode===p.maxMode&&1===t||e.datepickerMode===p.minMode&&-1===t||(e.datepickerMode=p.modes[p.modes.indexOf(e.datepickerMode)+t]))},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var f=function(){p.element[0].focus()};e.$on("uib:datepicker.focus",f),e.keydown=function(t){var a=e.keys[t.which];if(a&&!t.shiftKey&&!t.altKey&&!e.disabled)if(t.preventDefault(),p.shortcutPropagation||t.stopPropagation(),"enter"===a||"space"===a){if(p.isDisabled(p.activeDate))return;e.select(p.activeDate)}else!t.ctrlKey||"up"!==a&&"down"!==a?(p.handleKeyDown(a,t),p.refreshView()):e.toggleMode("up"===a?1:-1)},e.$on("$destroy",function(){for(;d.length;)d.shift()()})}]).controller("RichccDaypickerController",["$scope","$element","dateFilter",function(e,t,a){function n(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?f[t]:29}function i(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var a=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((a-t)/864e5)/7)+1}function r(e,t){return t>e?-1:e==t?0:e>t?1:void 0}function o(e,t){var a=[],n=Math.abs(new Date(e).getTime()-new Date(t).getTime()),i=Math.ceil(n/864e5)+1;return _.each(_.range(i),function(t){var n=new Date(e);n=n.setDate(n.getDate()+t),a.push(new Date(n))}),a}function s(e){for(var t=!0,a=1;t;){var n=_.find(e,function(e){return e.order==a});"undefined"==typeof n?t=!1:a+=1}return a}function c(e,t){var a=_.find(t,function(t){return t.date.getDate()==e.getDate()&&t.date.getMonth()==e.getMonth()&&t.date.getFullYear()==e.getFullYear()});return"undefined"==typeof a?!1:!0}function l(e,t){var a=!1;if(t.length>0){var n=t.length;if(t[0].length>0){var i=t[n-1].length;e>=t[0][0].date&&e<=t[n-1][i-1].date&&(a=!0)}}return a}function p(e,t){var a=!1;if(t.length>0){t.length;if(t[0].length>0){var n=t[2][3],i=new Date(n.date.getFullYear(),n.date.getMonth(),1).setHours(0,0,0,0),r=new Date(n.date.getFullYear(),n.date.getMonth()+1,0).setHours(0,0,0,0);e>=i&&r>=e&&(a=!0)}}return a}function u(e,t){var a=[];if(t.length>0){var n=t.length;if(t[0].length>0){var i=t[2][3],r=new Date(i.date.getFullYear(),i.date.getMonth()+1,0).setHours(0,0,0,0);a=_.filter(e,function(e){t[n-1].length;return e>=t[0][0].date&&r>=e})}}return a}function h(e,t,a){var n=o(t,a);return t.getMonth()==a.getMonth()?e.splice(n.length-1).length:e.length}function d(e,t){var n={date:e,label:a(e,t.replace(/d!/,"dd")).replace(/M!/,"MM")};return n}var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=t,this.init=function(t){angular.extend(t,this),e.showWeeks=t.showWeeks||!0,t.refreshView()};var D=this;this.initForAllMonthsHeatData=function(t){D._actMonViewDate=e.monthDate,D.activeMonthViewDate=e.monthDate.date,angular.extend(this,t),D._refreshMonthView(!0)},this.initForAllMonthsEventsData=function(t){D._actMonViewDate=e.monthDate,D.activeMonthViewDate=e.monthDate.date,angular.extend(this,t),D._refreshMonthView(!1)},e.richccDaySelected=function(t,a){var n={dt:t,events:a};"function"==typeof e.daySelectCallback?e.daySelectCallback({data:n}):"function"==typeof e.$parent.daySelectCallback&&e.$parent.daySelectCallback({data:n})},e.popUpLeftHandler=function(t,a){var n={dt:t,events:a};"function"==typeof e.eventPopupLeftCallback?e.eventPopupLeftCallback({data:n}):"function"==typeof e.$parent.eventPopupLeftCallback&&e.$parent.eventPopupLeftCallback({data:n})},e.popUpRightHandler=function(t,a){var n={dt:t,events:a};"function"==typeof e.eventPopupRightCallback?e.eventPopupRightCallback({data:n}):"function"==typeof e.$parent.eventPopupRightCallback&&e.$parent.eventPopupRightCallback({data:n})},this.getDates=function(e,t){for(var a,n=new Array(t),i=new Date(e),r=0;t>r;)a=new Date(i),n[r++]=a,i.setDate(i.getDate()+1);return n},this._refreshView=function(){var t=this.activeDate.getFullYear(),n=this.activeDate.getMonth(),r=new Date(this.activeDate);r.setFullYear(t,n,1);var o=this.startingDay-r.getDay(),s=o>0?7-o:-o,c=new Date(r);s>0&&c.setDate(-s+1);for(var l=this.getDates(c,42),p=0;42>p;p++)l[p]=angular.extend(this.createDateObject(l[p],this.formatDay),{secondary:l[p].getMonth()!==n,uid:e.uniqueId+"-"+p,key:l[p].getFullYear()+"_"+l[p].getMonth()+"_"+l[p].getDate()});e.labels=new Array(7);for(var u=0;7>u;u++)e.labels[u]={abbr:a(l[u].date,this.formatDayHeader),full:a(l[u].date,"EEEE")};if(e.title=a(this.activeDate,this.formatDayTitle),e.rows=this.split(l,7),e.showWeeks){e.weekNumbers=[];for(var h=(11-this.startingDay)%7,d=e.rows.length,f=0;d>f;f++)e.weekNumbers.push(i(e.rows[f][h].date))}1==this.showDataLabel&&(e.dataLabels=this.processLabels(this._dayLabels)),e.eventDetails=this.processEvents(this._events,e.rows),e.light=this.light,e.yearMapHeat=this.yearMapHeat,e.eventPopupHide=this.eventPopupHide,e.preventCalNav=this.preventCalNav,e.preventModeToggle=this.preventModeToggle,e.monthPopUpTmpl=this.monthPopUpTmpl,e.dayPopUpTmpl=this.dayPopUpTmpl},this.compare=function(e,t){var a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate());return a.setFullYear(e.getFullYear()),n.setFullYear(t.getFullYear()),a-n},this.handleKeyDown=function(e,t){var a=this.activeDate.getDate();if("left"===e)a-=1;else if("up"===e)a-=7;else if("right"===e)a+=1;else if("down"===e)a+=7;else if("pageup"===e||"pagedown"===e){var i=this.activeDate.getMonth()+("pageup"===e?-1:1);this.activeDate.setMonth(i,1),a=Math.min(n(this.activeDate.getFullYear(),this.activeDate.getMonth()),a)}else"home"===e?a=1:"end"===e&&(a=n(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(a)},this.processEvents=function(e,t){var a=_.map(t,function(e){var t=e[0];return t._date=t.date.setHours(0,0,0,0),t}),n=_.map(e,function(e){return e._startDt=new Date(e.startDt).setHours(0,0,0,0),e._endDt=new Date(e.endDt).setHours(0,0,0,0),e}),i=n.sort(function(e,t){return e._startDt==t._startDt?r(e._endDt,t._endDt):r(e._startDt,t._startDt)}),p={},u=1;return _.each(i,function(e){var n=o(e._startDt,e._endDt),i={};angular.extend(i,e),i.order=null,i.first=null,_.each(n,function(e,r){var o=l(e,t);if(1==o){var h=e.getFullYear()+"_"+e.getMonth()+"_"+e.getDate();("undefined"==typeof p[h]||null==p[h])&&(p[h]=[]);var d=i.order;0==r&&(i.order=s(p[h])),1==c(e,a)&&(i.order=s(p[h]));var f=i.order;d!=f&&2>=f?i.startPaint=i.startPaintForMonth=!0:i.startPaint=i.startPaintForMonth=!1,1==c(e,a)&&2>=f&&(i.startPaint=!0),i.paintBoxLength=Math.min(7-e.getDay(),n.length-r),i.paintBoxLengthForMonth=n.length,1==i.startPaint&&(i.step=u,u+=1);var D=_.clone(i);p[h].push(D)}})}),p},this.processEventsForMonthEventViewer=function(e,t){var a=_.map(e,function(e){return e._startDt=new Date(e.startDt).setHours(0,0,0,0),e._endDt=new Date(e.endDt).setHours(0,0,0,0),e}),n=a.sort(function(e,t){return e._startDt==t._startDt?r(e._endDt,t._endDt):r(e._startDt,t._startDt)}),i={},c={};return _.each(n,function(e){var a=o(e._startDt,e._endDt),n={};angular.extend(n,e),n.order=null,n.first=null,_.each(a,function(r,o){var l=p(r,t);if(1==l){var d=r.getFullYear()+"_"+r.getMonth()+"_"+r.getDate();("undefined"==typeof i[d]||null==i[d])&&(i[d]=[]);var f=n.id+"_"+r.getMonth();if(1!=c[f]){var D=n.order;n.order=s(i[d]);var m=n.order;if(D!=m&&2>=m){n.startPaintForMonth=!0;var g=u(a,t);n.paintBoxLengthForMonth=h(g,r,new Date(e._startDt)),c[f]=!0}else n.startPaintForMonth=!1}else n.startPaintForMonth=!1;var v=_.clone(n);i[d].push(v)}})}),i},this.processLabels=function(e){var t={};return _.each(e,function(e){var a=new Date(e.dt),n=a.getFullYear()+"_"+a.getMonth()+"_"+a.getDate();t[n]=e.label}),t},e.viewAllEvents=function(e,t){return t.stopPropagation(),t.preventDefault(),!1},e.getPopUpPositionForDayMap=function(e,t){var a="";return a=2>=e?"bottom":"top",0==t?a+="-left":6==t&&(a+="-right"),a},e.getPopUpPositionForMonthHeatMap=function(e){var t="";switch(e){case 0:case 1:t="bottom-left";break;case 6:case 7:t="top-left";break;case 4:case 5:t="bottom-right";break;case 10:case 11:t="top-right";break;case 8:case 9:t="top";break;case 2:case 3:default:t="bottom"}return t},e.getPopUpPositionForMonthEventMap=function(e,t){var a="";switch(a=6>e?"bottom":"top",t){case 0:case 1:a+="-left";break;case 5:case 6:a+="-right";break;default:a=a}return a},this._refreshMonthView=function(t){1==t&&this.activeMonthViewDate.setDate(15);var n=this.activeMonthViewDate.getFullYear(),r=this.activeMonthViewDate.getMonth(),o=new Date(this.activeMonthViewDate);o.setFullYear(n,r,1),this.startingDay=0;var s=this.startingDay-o.getDay(),c=s>0?7-s:-s,l=new Date(o);c>0&&l.setDate(-c+1);for(var p=this.getDates(l,42),u=0;42>u;u++)p[u]=angular.extend(d(p[u],this.formatDay),{secondary:p[u].getMonth()!==r,uid:e.uniqueId+"-"+u,key:p[u].getFullYear()+"_"+p[u].getMonth()+"_"+p[u].getDate(),monthIndex:p[u].getMonth()});e.labels=new Array(7),this.labels=[];for(var h=0;7>h;h++){var f={abbr:a(p[h].date,this.formatDayHeader),full:a(p[h].date,"EEEE")};this.labels.push(f),e.labels[h]=f}if("undefined"!=typeof e.monthWiseEventMarkers?e.monthWiseEventMarkers[this.activeMonthViewDate.getMonth()]=this.labels:"undefined"!=typeof e.parent.monthWiseEventMarkers&&(e.parent.monthWiseEventMarkers[this.activeMonthViewDate.getMonth()]=this.labels),e.title=a(this.activeMonthViewDate,this.formatDayTitle),e.rows=this.split(p,7),"undefined"!=typeof e.monthViewData?e.monthViewData[this.activeMonthViewDate.getMonth()]={dt:this._actMonViewDate,rows:e.rows}:"undefined"!=typeof e.parent.monthViewData&&(e.parent.monthViewData[this.activeMonthViewDate.getMonth()]={dt:this._actMonViewDate,rows:e.rows}),e.showWeeks){e.weekNumbers=[];for(var D=(11-this.startingDay)%7,m=e.rows.length,g=0;m>g;g++)e.weekNumbers.push(i(e.rows[g][D].date))}this.yearMapHeat?"undefined"!=typeof e.monthViewData?e.monthWiseEventDetails[this.activeMonthViewDate.getMonth()]=this.processEvents(this._events,e.rows):"undefined"!=typeof e.parent.monthViewData&&(e.parent.monthWiseEventDetails[this.activeMonthViewDate.getMonth()]=this.processEvents(this._events,e.rows)):"undefined"!=typeof e.monthViewData?e.monthWiseEventDetails[this.activeMonthViewDate.getMonth()]=this.processEventsForMonthEventViewer(this._events,e.rows):"undefined"!=typeof e.parent.monthViewData&&(e.parent.monthWiseEventDetails[this.activeMonthViewDate.getMonth()]=this.processEventsForMonthEventViewer(this._events,e.rows)),e.light=this.light,e.yearMapHeat=this.yearMapHeat,e.eventPopupHide=this.eventPopupHide,e.preventCalNav=this.preventCalNav,e.preventModeToggle=this.preventModeToggle,e.monthPopUpTmpl=this.monthPopUpTmpl,e.dayPopUpTmpl=this.dayPopUpTmpl}}]).controller("RichccMonthpickerController",["$scope","$element","dateFilter",function(e,t,a){this.step={years:1},this.element=t,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var t,n=new Array(12),i=this.activeDate.getFullYear(),r=0;12>r;r++)t=new Date(this.activeDate),t.setFullYear(i,r,1),n[r]=angular.extend(this.createDateObject(t,this.formatMonth),{uid:e.uniqueId+"-"+r,monthIndex:t.getMonth()});e.title=a(this.activeDate,this.formatMonthTitle);var o=1==e.yearMapHeat?6:1;e.rows=this.split(n,o)},this.compare=function(e,t){var a=new Date(e.getFullYear(),e.getMonth()),n=new Date(t.getFullYear(),t.getMonth());return a.setFullYear(e.getFullYear()),n.setFullYear(t.getFullYear()),a-n},this.handleKeyDown=function(e,t){var a=this.activeDate.getMonth();if("left"===e)a-=1;else if("up"===e)a-=3;else if("right"===e)a+=1;else if("down"===e)a+=3;else if("pageup"===e||"pagedown"===e){var n=this.activeDate.getFullYear()+("pageup"===e?-1:1);this.activeDate.setFullYear(n)}else"home"===e?a=0:"end"===e&&(a=11);this.activeDate.setMonth(a)}}]).controller("RichccYearpickerController",["$scope","$element","dateFilter",function(e,t,a){function n(e){return parseInt((e-1)/r,10)*r+1}var i,r;this.element=t,this.yearpickerInit=function(){i=this.yearColumns,r=this.yearRows*i,this.step={years:r}},this._refreshView=function(){for(var t,a=new Array(r),o=0,s=n(this.activeDate.getFullYear());r>o;o++)t=new Date(this.activeDate),t.setFullYear(s+o,0,1),a[o]=angular.extend(this.createDateObject(t,this.formatYear),{uid:e.uniqueId+"-"+o});e.title=[a[0].label,a[r-1].label].join(" - "),e.rows=this.split(a,i),e.columns=i},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e,t){var a=this.activeDate.getFullYear();"left"===e?a-=1:"up"===e?a-=i:"right"===e?a+=1:"down"===e?a+=i:"pageup"===e||"pagedown"===e?a+=("pageup"===e?-1:1)*r:"home"===e?a=n(this.activeDate.getFullYear()):"end"===e&&(a=n(this.activeDate.getFullYear())+r-1),this.activeDate.setFullYear(a)}}]).directive("richccDatepicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/richcc/datepicker.html"},scope:{datepickerMode:"=?",datepickerOptions:"=?",dateDisabled:"&",customClass:"&",customIconClass:"&",shortcutPropagation:"&?",events:"=",dayLabels:"=",light:"=",eventPopupHide:"=",preventCalNav:"=",preventModeToggle:"=",yearMapHeat:"=",daySelectCallback:"&",eventPopupLeftCallback:"&",eventPopupRightCallback:"&",eventPopupSettings:"="},require:["richccDatepicker","^ngModel"],controller:"RichccDatepickerController",controllerAs:"datepicker",link:function(e,t,a,n){var i=n[0],r=n[1];i.init(r)}}}).directive("richccDaypicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/richcc/day.html"},require:["^richccDatepicker","richccDaypicker"],controller:"RichccDaypickerController",link:function(e,t,a,n){var i=n[0],r=n[1];r.init(i)}}}).directive("richMonthsHeatViewer",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/richcc/monthHeatViewer.html"},transclude:!0,scope:{monthDate:"=",monthIndex:"=",monthSelectCallback:"&"},require:["^richccDatepicker","^richccMonthpickerHeatmap","richMonthsHeatViewer"],controller:"RichccDaypickerController",link:function(e,t,a,n){var i=n[0],r=(n[1],n[2]);r.initForAllMonthsHeatData(i)}}}).directive("richMonthsEventViewer",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/richcc/monthEventViewer.html"},transclude:!0,scope:{monthDate:"=",monthIndex:"=",monthSelectCallback:"&"},require:["^richccDatepicker","^richccMonthpickerEventmap","richMonthsEventViewer"],controller:"RichccDaypickerController",link:function(e,t,a,n){var i=n[0],r=(n[1],n[2]);r.initForAllMonthsEventsData(i)}}}).directive("richMonthsDayMarker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/richcc/monthViewerDayMarker.html"}}}).directive("richccMonthpickerHeatmap",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/richcc/monthHeatWrap.html"},require:["^richccDatepicker","richccMonthpickerHeatmap"],controller:"RichccMonthpickerController",link:function(e,t,a,n){var i=n[0],r=n[1];r.init(i)}}}).directive("richccMonthpickerEventmap",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/richcc/monthEventWrap.html"},require:["^richccDatepicker","richccMonthpickerEventmap"],controller:"RichccMonthpickerController",link:function(e,t,a,n){var i=n[0],r=n[1];r.init(i)}}}).directive("richccYearpicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"template/richcc/year.html"},require:["^richccDatepicker","richccYearpicker"],controller:"RichccYearpickerController",link:function(e,t,a,n){var i=n[0];angular.extend(i,n[1]),i.yearpickerInit(),i.refreshView()}}}).constant("richccDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"template/richcc/popup.html",datepickerTemplateUrl:"template/richcc/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0}).controller("RichccDatepickerPopupController",["$scope","$element","$attrs","$compile","$parse","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","richccDatepickerPopupConfig","$timeout","richccDatepickerConfig",function(e,t,a,n,i,r,o,s,c,l,p,u,h){function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function f(t){var a=l.parse(t,M,e.date);if(isNaN(a))for(var n=0;n<O.length;n++)if(a=l.parse(t,O[n],e.date),!isNaN(a))return a;return a}function D(e){if(angular.isNumber(e)&&(e=new Date(e)),!e)return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=f(e);if(!isNaN(t))return l.toTimezone(t,P.timezone)}return F.$options&&F.$options.allowInvalid?e:void 0}function m(e,t){var n=e||t;return a.ngRequired||n?(angular.isNumber(n)&&(n=new Date(n)),n?angular.isDate(n)&&!isNaN(n)?!0:angular.isString(n)?!isNaN(f(t)):!1:!0):!0}function g(a){if(e.isOpen||!e.disabled){var n=V[0],i=t[0].contains(a.target),r=void 0!==n.contains&&n.contains(a.target);!e.isOpen||i||r||e.$apply(function(){e.isOpen=!1})}}function v(a){27===a.which&&e.isOpen?(a.preventDefault(),a.stopPropagation(),e.$apply(function(){e.isOpen=!1}),t[0].focus()):40!==a.which||e.isOpen||(a.preventDefault(),a.stopPropagation(),e.$apply(function(){e.isOpen=!0}))}var M,w,y,k,b,$,T,C,F,P,V,O,E={},_=!1,Y=[];e.watchData={},this.init=function(s){if(F=s,P=s.$options||h.ngModelOptions,w=angular.isDefined(a.closeOnDateSelection)?e.$parent.$eval(a.closeOnDateSelection):p.closeOnDateSelection,y=angular.isDefined(a.datepickerAppendToBody)?e.$parent.$eval(a.datepickerAppendToBody):p.appendToBody,k=angular.isDefined(a.onOpenFocus)?e.$parent.$eval(a.onOpenFocus):p.onOpenFocus,b=angular.isDefined(a.datepickerPopupTemplateUrl)?a.datepickerPopupTemplateUrl:p.datepickerPopupTemplateUrl,$=angular.isDefined(a.datepickerTemplateUrl)?a.datepickerTemplateUrl:p.datepickerTemplateUrl,O=angular.isDefined(a.altInputFormats)?e.$parent.$eval(a.altInputFormats):p.altInputFormats,e.showButtonBar=angular.isDefined(a.showButtonBar)?e.$parent.$eval(a.showButtonBar):p.showButtonBar,p.html5Types[a.type]?(M=p.html5Types[a.type],_=!0):(M=a.uibDatepickerPopup||p.datepickerPopup,a.$observe("uibDatepickerPopup",function(e,t){var a=e||p.datepickerPopup;if(a!==M&&(M=a,F.$modelValue=null,!M))throw new Error("uibDatepickerPopup must have a date format specified.")})),!M)throw new Error("uibDatepickerPopup must have a date format specified.");if(_&&a.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");T=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),e.ngModelOptions=angular.copy(P),e.ngModelOptions.timezone=null,T.attr({"ng-model":"date","ng-model-options":"ngModelOptions","ng-change":"dateSelection(date)","template-url":b}),C=angular.element(T.children()[0]),C.attr("template-url",$),_&&"month"===a.type&&(C.attr("datepicker-mode",'"month"'),C.attr("min-mode","month")),e.datepickerOptions&&angular.forEach(e.datepickerOptions,function(e,t){-1===["minDate","maxDate","minMode","maxMode","initDate","datepickerMode"].indexOf(t)?C.attr(d(t),e):C.attr(d(t),"datepickerOptions."+t)}),angular.forEach(["minMode","maxMode","datepickerMode","shortcutPropagation"],function(t){if(a[t]){var n=i(a[t]),r={get:function(){return n(e.$parent)}};if(C.attr(d(t),"watchData."+t),"datepickerMode"===t){var o=n.assign;r.set=function(t){o(e.$parent,t)}}Object.defineProperty(e.watchData,t,r)}}),angular.forEach(["minDate","maxDate","initDate"],function(t){if(a[t]){var n=i(a[t]);Y.push(e.$parent.$watch(n,function(a){"minDate"===t||"maxDate"===t?(null===a?E[t]=null:angular.isDate(a)?E[t]=l.fromTimezone(new Date(a),P.timezone):E[t]=new Date(c(a,"medium")),e.watchData[t]=null===a?null:E[t]):e.watchData[t]=l.fromTimezone(new Date(a),P.timezone)})),C.attr(d(t),"watchData."+t)}}),a.dateDisabled&&C.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRows","yearColumns"],function(e){angular.isDefined(a[e])&&C.attr(d(e),a[e])}),a.customClass&&C.attr("custom-class","customClass({ date: date, mode: mode })"),a.customIconClass&&C.attr("custom-class","customIconClass({ date: date, mode: mode })"),_?F.$formatters.push(function(t){return e.date=l.fromTimezone(t,P.timezone),t}):(F.$$parserName="date",F.$validators.date=m,F.$parsers.unshift(D),F.$formatters.push(function(t){return F.$isEmpty(t)?(e.date=t,t):(e.date=l.fromTimezone(t,P.timezone),M=M.replace(/M!/,"MM").replace(/d!/,"dd"),c(e.date,M))})),F.$viewChangeListeners.push(function(){e.date=f(F.$viewValue)}),t.on("keydown",v),V=n(T)(e),T.remove(),y?r.find("body").append(V):t.after(V),e.$on("$destroy",function(){for(e.isOpen===!0&&(o.$$phase||e.$apply(function(){e.isOpen=!1})),V.remove(),t.off("keydown",v),r.off("click",g);Y.length;)Y.shift()()})},e.getText=function(t){return e[t+"Text"]||p[t+"Text"]},e.isDisabled=function(t){return"today"===t&&(t=new Date),e.watchData.minDate&&e.compare(t,E.minDate)<0||e.watchData.maxDate&&e.compare(t,E.maxDate)>0},e.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},e.dateSelection=function(a){angular.isDefined(a)&&(e.date=a);var n=e.date?c(e.date,M):null;t.val(n),F.$setViewValue(n),w&&(e.isOpen=!1,t[0].focus())},e.keydown=function(a){27===a.which&&(a.stopPropagation(),e.isOpen=!1,t[0].focus())},e.select=function(t){if("today"===t){var a=new Date;angular.isDate(e.date)?(t=new Date(e.date),t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate())):t=new Date(a.setHours(0,0,0,0))}e.dateSelection(t)},e.close=function(){e.isOpen=!1,t[0].focus()},e.disabled=angular.isDefined(a.disabled)||!1,a.ngDisabled&&Y.push(e.$parent.$watch(i(a.ngDisabled),function(t){e.disabled=t})),e.$watch("isOpen",function(a){a?e.disabled?e.isOpen=!1:(e.position=y?s.offset(t):s.position(t),e.position.top=e.position.top+t.prop("offsetHeight"),u(function(){k&&e.$broadcast("uib:datepicker.focus"),r.on("click",g)},0,!1)):r.off("click",g)})}]).directive("richccDatepickerPopup",function(){return{require:["ngModel","richccDatepickerPopup"],controller:"RichccDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&",customIconClass:"&"},link:function(e,t,a,n){var i=n[0],r=n[1];r.init(i)}}}).directive("richccDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/richcc/popup.html"}}}).directive("ccKey",function(){return{restrict:"AEC",link:function(e,t,a){t.on("click",function(t){1!=a.ngDisabled&&e.$apply(a.ccKey)}),t.on("keyup",function(t){13!=t.keyCode&&32!=t.keyCode||1==a.ngDisabled||e.$apply(a.ccKey)})}}});
!function(){"use strict";var e={richccTmplDatepicker:'        <div class="uib-datepicker richcc-datepicker" ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">            <div class="richcc-comp-title">Calendar</div>            <div class="richcc-cal-holder">                <richcc-daypicker ng-switch-when="day" tabindex="0"></richcc-daypicker>                <richcc-monthpicker-heatmap ng-switch-when="month" ng-if="yearMapHeat == true" tabindex="0"></richcc-monthpicker-heatmap>                <richcc-monthpicker-eventmap ng-switch-when="month" ng-if="yearMapHeat == false" tabindex="0"></richcc-monthpicker-eventmap>                <richcc-yearpicker ng-switch-when="year" tabindex="0"></richcc-yearpicker>            </div>        </div>    ',richccTmplDay:'        <table class="uib-daypicker richcc-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}" ng-class="{\'richcc-light\': light}">            <thead>                <tr class="header-action-holder">                    <th colspan="1" ng-if="light != true"></th>                    <th colspan="{{light == true ? 8 : 5}}">                        <div class="header-actions" ng-class="{\'calNavHidden\' : hideCalNav == true}">                            <div class="richcc-icon-container nav-left" cc-key="move(-1)" role="button" tabindex="0" ng-disabled="preventCalNav == true" ng-hide="hideCalNav == true">                                <i class="richcc-icon icon-ScrollChevronLeftLegacy"></i>                            </div>                            <div class="richcc-icon-container labelHolder" id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" cc-key="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="0">                                <label class="title">{{title}}</label>                            </div>                            <div class="richcc-icon-container nav-right" cc-key="move(1)" role="button" tabindex="0" ng-disabled="preventCalNav == true" ng-hide="hideCalNav == true">                                <i class="richcc-icon icon-ScrollChevronRightLegacy"></i>                            </div>                        </div>                    </th>                    <th colspan="1" ng-if="light != true"></th>                </tr>                <tr class="header-dayname-row">                    <th ng-if="showWeeks && false" class="text-center"></th>                    <th colspan="1" ng-repeat="label in ::labels track by $index" class="text-center dayTitle"><span aria-label="{{::label.full}}">{{::label.abbr | limitTo:1}}</span></th>                    <th colspan="1" ng-if="light == true"></th>                </tr>            </thead>            <tbody>                <tr class="uib-weeks richcc-row" ng-repeat="row in rows track by $index" ng-init="rowindex = $index">                    <td ng-if="showWeeks && false" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>                    <td ng-repeat="dt in row" class="uib-day text-center richcc-td" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass" colspan="1" ng-disabled="::dt.disabled" ng-init="columnindex = $index" ng-click="richccDaySelected(dt, eventDetails[dt.key])" uib-popover-template="dayPopUpTmpl" popover-trigger="{{eventDetails[dt.key].length > 0 && eventPopupSettings.hidden != true ? \'outsideClick\' : \'none\'}}" popover-append-to-body="true" popover-placement="{{getPopUpPositionForDayMap(rowindex, columnindex)}}" popover-class="richcc-popup-container">                        <div class="richcc-icon-container dayHolder" uib-is-class="                             \'cc-info\' for selectedDt,                             \'cc-active\' for activeDt                             on dt" ng-class="::{\'cc-current\': dt.current, \'cc-muted\': dt.secondary}" tabindex="0" ng-if="light != true">                            <div class="richcc-day">                                <span>{{::dt.label}}</span>                            </div>                        </div>                        <div class="richcc-time-label" ng-show="showDataLabel == true && light != true">                            <span ng-show="dataLabels[dt.key]">{{::dataLabels[dt.key]}}</span>                            <span ng-hide="dataLabels[dt.key]">{{::defaultDataLabel}}</span>                            <span ng-class="::dt.customIconClass"></span>                        </div>                        <div class="markHolder" style="position:relative;" ng-show="eventDetails[dt.key].length > 0">                            <div class="mark step-{{event.step}}" ng-class="{\'top\': event.order == 1, \'bottom\': event.order == 2}" ng-style="{\'color\': event.color, \'width\': light != true ?  \'calc(\' + 100 * event.paintBoxLength + \'% - 5px)\' : \'calc(\' + 100 * event.paintBoxLength + \'% - 20px)\'}" ng-repeat="event in eventDetails[dt.key]" ng-if="event.startPaint == true" style="color:#fff;">                                <div class="mark-text-initial" ng-if="light == true" ng-style="{\'color\': event.bgcolor}">{{event.initial | limitTo: 1}}</div>                                <div class="mark-stripe" ng-style="{\'background-color\': event.bgcolor, \'border-color\': event.highlightBorderColor}" ng-class="{\'highlightBorder\': light == false ? event.highlightBorder : \'\'}">                                    <span class="text">{{event.name}}</span>                                </div>                            </div>                            <div class="mark morePresent" ng-show="eventDetails[dt.key].length > 2 && showMarkerForMoreEvents != false">                                <div class="richcc-icon-container">                                    <i class="richcc-icon icon-more"></i>                                </div>                            </div>                        </div>                    </td>                    <td colspan="1" ng-if="light == true" class="richcc-td richcc-light-lastdaymark">                        <span>{{::row[6].label}}</span>                    </td>                </tr>            </tbody>        </table>    ',richccTmplMonthEventViewer:'        <table class="uib-daypicker richcc-monthviewer" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}" ng-class="{\'richcc-light\': light}" ng-init="parent = $parent">            <thead style="height:0 !important; margin:0;padding:0;line-height:0;">                <tr class="header-action-holder" style="height:0 !important; margin:0;padding:0;line-height:0;">                    <th colspan="1" class="w48" style="height:0 !important; margin:0;padding:0;line-height:0;"></th>                    <th colspan="38" style="height:0 !important; margin:0;padding:0;line-height:0;">&#xA0;</th>                </tr>            </thead>            <tbody>                <tr class="uib-weeks richcc-row">                    <td colspan="1" class="w48 eventMonthMarker" cc-key="monthSelectCallback()">{{parent.monthViewData[monthIndex].dt.label | limitTo:3}}</td>                    <td ng-repeat="row in parent.monthViewData[monthIndex].rows track by $index" role="gridcell" ng-attr-colspan="{{weekindex == 5 ? 3 : 7}}" class="uib-day text-center richcc-td richcc-td-space{{weekindex}}" ng-init="weekindex = $index">                        <div class="richcc-month-eventbox" ng-repeat="column in row track by $index" ng-if="(weekindex != 5) || (weekindex == 5 && $index < 3)">                            <div class="richcc-eventbox-content" ng-class="{\'notInPresentMonth\' : column.monthIndex != monthIndex}" ng-init="popitem = column;" uib-popover-template="monthPopUpTmpl" ng-click="richccDaySelected(column, parent.monthWiseEventDetails[monthIndex][popitem.key])" popover-trigger="{{parent.monthWiseEventDetails[monthIndex][popitem.key].length > 0 &&  eventPopupSettings.hidden != true && column.monthIndex == monthIndex ? \'outsideClick\' : \'none\'}}" popover-append-to-body="true" popover-placement="{{getPopUpPositionForMonthEventMap(monthIndex, weekindex)}}" popover-class="richcc-popup-container">                                <div class="markHolder" style="position:relative;" ng-show="parent.monthWiseEventDetails[monthIndex][column.key].length > 0">                                    <div class="mark step-{{event.step}}" ng-class="{\'top\': event.order == 1, \'bottom\': event.order == 2}" ng-style="{\'color\': event.color, \'width\': \'calc(\' + 100 * event.paintBoxLengthForMonth + \'% - 18px)\'}" ng-repeat="event in parent.monthWiseEventDetails[monthIndex][column.key]" ng-if="event.startPaintForMonth == true" style="color:#fff;">                                        <div class="mark-text-initial" ng-style="{\'color\': event.bgcolor}">{{event.initial | limitTo: 1}}</div>                                        <div class="mark-stripe light" ng-style="{\'background-color\': event.bgcolor}"></div>                                    </div>                                </div>                            </div>                        </div>                    </td>                </tr>            </tbody>        </table>    ',richccTmplMonthEventWrap:'        <table class="uib-monthpicker richcc-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">            <thead>                <tr class="header-action-holder">                    <th colspan="1"></th>                    <th colspan="4">                        <div class="header-actions">                            <div class="richcc-icon-container nav-left" cc-key="move(-1)" role="button" tabindex="0" ng-disabled="preventCalNav == true">                                <i class="richcc-icon icon-ScrollChevronLeftLegacy"></i>                            </div>                            <div class="richcc-icon-container labelHolder" id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" cc-key="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="0">                                <label class="title">{{title}}</label>                            </div>                            <div class="richcc-icon-container nav-right" cc-key="move(1)" role="button" tabindex="0" ng-disabled="preventCalNav == true">                                <i class="richcc-icon icon-ScrollChevronRightLegacy"></i>                            </div>                        </div>                    </th>                    <th colspan="1"></th>                </tr>            </thead>            <tbody>                <tr class="uib-months" style="height: 24px;">                    <td colspan="6">                        <rich-months-day-marker></rich-months-day-marker>                    </td>                </tr>                <tr class="uib-months" ng-repeat="row in rows track by $index">                    <td ng-repeat="dt in row" class="uib-month text-center richcc-month-event-box-holder" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass" colspan="6">                        <rich-months-event-viewer month-date="dt" month-index="dt.monthIndex" month-select-callback="select(dt.date)"></rich-months-event-viewer>                    </td>                </tr>            </tbody>        </table>    ',richccTmplMonthHeatViewer:'        <table class="uib-daypicker richcc-monthviewer" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}" ng-class="{\'richcc-light\': light}" ng-init="parent = $parent">            <thead>                <tr class="header-action-holder">                    <th colspan="7" cc-key="monthSelectCallback()">{{parent.monthViewData[monthIndex].dt.label | limitTo:3}}</th>                </tr>            </thead>            <tbody>                <tr class="uib-weeks richcc-row" ng-repeat="row in [0,1,2,3,4,5,6] track by $index">                    <td ng-repeat="column in parent.monthViewData[monthIndex].rows" class="uib-day text-center richcc-td" role="gridcell" id="{{::mdt.key}}" colspan="1" ng-style="{\'opacity\': column[row].monthIndex != monthIndex ? 0 : 1}" ng-init="mdt = column[row]; popitem = column[row]" ng-attr-len="{{parent.monthWiseEventDetails[monthIndex][mdt.key].length}}" ng-click="richccDaySelected(column, parent.monthWiseEventDetails[monthIndex][popitem.key])" uib-popover-template="monthPopUpTmpl" popover-trigger="{{parent.monthWiseEventDetails[monthIndex][popitem.key].length > 0 &&  eventPopupSettings.hidden != true ? \'outsideClick\' : \'none\'}}" popover-append-to-body="true" popover-placement="{{getPopUpPositionForMonthHeatMap(monthIndex)}}" popover-class="richcc-popup-container">                        <div class="richcc-mv-box" ng-class="{\'fullyOpaque\': parent.monthWiseEventDetails[monthIndex][mdt.key].length > 2}" ng-attr-transparent="{{parent.monthWiseEventDetails[monthIndex][mdt.key].length}}"></div>                    </td>                </tr>            </tbody>        </table>    ',richccTmplMonthHeatWrap:'        <table class="uib-monthpicker richcc-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">            <thead>                <tr class="header-action-holder">                    <th colspan="1" class="w48"></th>                    <th colspan="1"></th>                    <th colspan="4">                        <div class="header-actions">                            <div class="richcc-icon-container nav-left" cc-key="move(-1)" role="button" tabindex="0" ng-disabled="preventCalNav == true">                                <i class="richcc-icon icon-ScrollChevronLeftLegacy"></i>                            </div>                            <div class="richcc-icon-container labelHolder" id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" cc-key="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="0">                                <label class="title">{{title}}</label>                            </div>                            <div class="richcc-icon-container nav-right" cc-key="move(1)" role="button" tabindex="0" ng-disabled="preventCalNav == true">                                <i class="richcc-icon icon-ScrollChevronRightLegacy"></i>                            </div>                        </div>                    </th>                    <th colspan="1"></th>                </tr>            </thead>            <tbody>                <tr class="uib-months" ng-repeat="row in rows track by $index">                    <td class="uib-month text-center w48" role="gridcell" colspan="1">                        <rich-months-day-marker></rich-months-day-marker>                    </td>                    <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass" colspan="1">                        <rich-months-heat-viewer month-date="dt" month-index="dt.monthIndex" month-select-callback="select(dt.date)"></rich-months-heat-viewer>                    </td>                </tr>            </tbody>        </table>    ',richccTmplMonthViewerDayMarker:'        <table class="uib-daypicker richcc-monthviewer" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}" ng-class="{\'richcc-light\': light}" ng-init="parent = $parent">            <thead ng-if="yearMapHeat == true">                <tr class="header-action-holder">                    <th colspan="1">&#xA0;</th>                </tr>            </thead>            <thead style="height:0 !important; margin:0;padding:0;line-height:0;" ng-if="yearMapHeat == false">                <tr class="header-action-holder" style="height:0 !important; margin:0;padding:0;line-height:0;">                    <th colspan="1" class="w48" style="height:0 !important; margin:0;padding:0;line-height:0;"></th>                    <th colspan="38" style="height:0 !important; margin:0;padding:0;line-height:0;">&#xA0;</th>                </tr>            </thead>            <tbody>                <tr class="uib-weeks richcc-row" ng-repeat="row in [0,1,2,3,4,5,6] track by $index" ng-if="yearMapHeat == true">                    <td class="uib-day text-center richcc-td" role="gridcell">                        <span class="marker" ng-show="$index == 1 || $index == 3 || $index == 5">{{monthWiseEventMarkers[0][row].abbr | limitTo:1}}</span>                    </td>                </tr>                <tr class="uib-weeks richcc-row" ng-if="yearMapHeat == false">                    <td colspan="1" class="w48">&#xA0;</td>                    <td ng-repeat="row in parent.monthViewData[0].rows track by $index" role="gridcell" ng-attr-colspan="{{weekindex == 5 ? 3 : 7}}" class="uib-day text-center richcc-td richcc-td-space{{weekindex}}" ng-init="weekindex = $index">                        <div class="richcc-month-eventbox eventDayMarker" ng-repeat="column in row track by $index" ng-if="(weekindex != 5) || (weekindex == 5 && $index < 3)">                            <span>{{monthWiseEventMarkers[0][$index].abbr | limitTo:1}}</span>                        </div>                    </td>                </tr>            </tbody>        </table>    ',richccTmplPopup:'        <div>            <ul class="uib-datepicker-popup dropdown-menu richcc-datepicker-popup" dropdown-nested="" ng-if="isOpen" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">                <li ng-transclude=""></li>                <li ng-if="showButtonBar" class="uib-button-bar">                    <span class="btn-group pull-left">                        <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>                        <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null)">{{ getText(\'clear\') }}</button>                    </span>                    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close()">{{ getText(\'close\') }}</button>                </li>            </ul>        </div>    ',richccTmplDayPopup:'        <div class="richcc-day-popup">            <div class="event-container" ng-class="{\'noActions\': !(eventPopupSettings.showLeft || eventPopupSettings.showRight)}">                <div class="event-container-label">{{dt.date | date:\'dd MMM, yyyy\'}} ({{eventDetails[dt.key].length}} Events)</div>                <div class="event-details-container">                    <div class="event-detail" ng-repeat="event in eventDetails[dt.key]">                        <div class="event-marker"></div>                        <div class="event-title-holder" ng-style="{\'border-left-color\': event.bgcolor}">                            <span class="event-title">{{event.name}}</span> : <span class="event-subject">{{event.subject}}</span>                            <div class="event-timing-holder">                                <span class="event-time">{{event.startDt | date:\'MM/dd/yy\'}} 9.00</span><span style="padding: 0 15px;">-</span><span class="event-time">{{event.endDt | date:\'MM/dd/yy\'}} 9.00</span>                            </div>                        </div>                    </div>                </div>            </div>            <div class="event-action-container" ng-class="{\'singleButtonOnly\' : (eventPopupSettings.showLeft != false && eventPopupSettings.showRight == false) || (eventPopupSettings.showLeft == false && eventPopupSettings.showRight != false)}" ng-show="eventPopupSettings.showLeft || eventPopupSettings.showRight">                <button class="event-action" ng-if="eventPopupSettings.showLeft != false" ng-click="popUpLeftHandler(dt, eventDetails[dt.key])">{{eventPopupSettings.leftLabel || \'Add Events\'}}</button>                <button class="event-action" ng-if="eventPopupSettings.showRight != false" ng-click="popUpRightHandler(dt, eventDetails[dt.key])">{{eventPopupSettings.rightLabel || \'Edit Events\'}}</button>                <div class="event-separator"></div>            </div>        </div>    ',richccTmplRichccMonthPopup:'        <div class="richcc-day-popup">            <div class="event-container" ng-class="{\'noActions\': !(parent.eventPopupSettings.showLeft || parent.eventPopupSettings.showRight)}">                <div class="event-container-label">{{popitem.date | date:\'dd MMM, yyyy\'}} ({{parent.monthWiseEventDetails[monthIndex][popitem.key].length}} Events)</div>                <div class="event-details-container">                    <div class="event-detail" ng-repeat="event in parent.monthWiseEventDetails[monthIndex][popitem.key]">                        <div class="event-marker"></div>                        <div class="event-title-holder" ng-style="{\'border-left-color\': event.bgcolor}">                            <span class="event-title">{{event.name}}</span> : <span class="event-subject">{{event.subject}}</span>                            <div class="event-timing-holder">                                <span class="event-time">{{event.startDt | date:\'MM/dd/yy\'}} 9.00</span><span style="padding: 0 15px;">-</span><span class="event-time">{{event.endDt | date:\'MM/dd/yy\'}} 9.00</span>                            </div>                        </div>                    </div>                </div>            </div>            <div class="event-action-container" ng-class="{\'singleButtonOnly\' : (parent.eventPopupSettings.showLeft != false && parent.eventPopupSettings.showRight == false) || (parent.eventPopupSettings.showLeft == false && parent.eventPopupSettings.showRight != false)}" ng-show="parent.eventPopupSettings.showLeft || parent.eventPopupSettings.showRight">                <button class="event-action" ng-if="parent.eventPopupSettings.showLeft != false" ng-click="popUpLeftHandler(popitem, parent.monthWiseEventDetails[monthIndex][popitem.key])">{{parent.eventPopupSettings.leftLabel || \'Add Events\'}}</button>                <button class="event-action" ng-if="parent.eventPopupSettings.showRight != false" ng-click="popUpRightHandler(popitem, parent.monthWiseEventDetails[monthIndex][popitem.key])">{{parent.eventPopupSettings.rightLabel || \'Edit Events\'}}</button>                <div class="event-separator"></div>            </div>        </div>    ',richccTmplYear:'        <table class="uib-yearpicker richcc-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">            <thead>                <tr class="header-action-holder">                    <th colspan="1"></th>                    <th colspan="3">                        <div class="header-actions">                            <div class="richcc-icon-container nav-left" cc-key="move(-1)" role="button" tabindex="0" ng-disabled="preventCalNav == true">                                <i class="richcc-icon icon-ScrollChevronLeftLegacy"></i>                            </div>                            <div class="richcc-icon-container labelHolder" id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" cc-key="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="0">                                <label class="title">{{title}}</label>                            </div>                            <div class="richcc-icon-container nav-right" cc-key="move(1)" role="button" tabindex="0" ng-disabled="preventCalNav == true">                                <i class="richcc-icon icon-ScrollChevronRightLegacy"></i>                            </div>                        </div>                    </th>                    <th colspan="1"></th>                </tr>            </thead>            <thead>            </thead>            <tbody>                <tr class="uib-years" ng-repeat="row in rows track by $index">                    <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">                        <button type="button" class="btn btn-default" uib-is-class="                                \'btn-info\' for selectedDt,                                \'active\' for activeDt                                on dt" ng-click="select(dt.date)" ng-disabled="::dt.disabled" tabindex="-1">                            <span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span>                        </button>                    </td>                </tr>            </tbody>        </table>    '};angular.module("richcc.bootstrap.datepicker").run(["$templateCache",function(t){t.put("template/richcc/datepicker.html",e.richccTmplDatepicker),t.put("template/richcc/day.html",e.richccTmplDay),t.put("template/richcc/monthEventViewer.html",e.richccTmplMonthEventViewer),t.put("template/richcc/monthEventWrap.html",e.richccTmplMonthEventWrap),t.put("template/richcc/monthHeatViewer.html",e.richccTmplMonthHeatViewer),t.put("template/richcc/monthHeatWrap.html",e.richccTmplMonthHeatWrap),t.put("template/richcc/monthViewerDayMarker.html",e.richccTmplMonthViewerDayMarker),t.put("template/richcc/popup.html",e.richccTmplPopup),t.put("template/richcc/richccDayPopup.html",e.richccTmplDayPopup),t.put("template/richcc/richccMonthPopup.html",e.richccTmplRichccMonthPopup),t.put("template/richcc/year.html",e.richccTmplYear)}])}();